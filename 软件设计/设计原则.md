# 设计原则

## 开闭原则（Open-Closed Principle，OCP）
* 一个软件实体应当对扩展开放，对修改关闭。因为客户的需求是不稳定的，我们应该通过扩展已有的软件系统而不是通过修改软件系统来满足客户的需求。
* 具体表现为已有的模块，特别是抽象层的模块不能修改，保证软件系统的稳定性和延续性。
* 实现开闭原则的关键是抽象化，在面向对象的编程语言里，可以给系统定义出一套相对较为固定的抽象设计，此设计允许无穷无尽的行为在实现层被实现。
* 在语言里，可以给出一个或多个抽象类或者接口，规定出所有的具体类必须提供的方法的特征作为系统设计的抽象层。这个抽象层预见了所有的可扩展性，因此，在任何扩展情况下都不会改变。这就使得系统的抽象不需要修改，从而满足了开闭原则的第二条，对修改关闭。同时，由于从抽象层导出一个或多个新的具体类可以改变系统的行为，因此系统的设计对扩展是开放的，这就满足了开闭原则的第一条。

## 里氏代换原则（Liskov Substitution Principle，LSP）
* 子类型必须能够替换它们的基类型，而反过来的代换则不成立。
* 当两个具体类关系违反里氏代换原则时，有两种解决方法：
    * 一种是抽象出一个基类，作为这两个类的父类；
    * 另一种是建立组合或聚合关系。
* 不要为了使用某些类的方法（功能）而滥用继承。

## 依赖倒置原则(Dependence Inversion Principle，DIP)
* 具体要依赖于抽象，而不是抽象依赖于具体。
* 要针对接口编程，不要针对实现编程。同样，在处理类之间的耦合关系时，尽量使用抽象耦合的形式。
* 里氏替换原则是依赖倒转原则的基础。工厂模式、模板模式、迭代子模式都是对依赖倒转原则的体现。

## 接口隔离原则（Interface Segregation Principle，ISP）
* 使用多个专门的接口而不使用单一的总接口。换而言之，一个类对另外一个类的依赖性应当是建立在最小接口上的。
* 过于臃肿的接口是对接口的污染，不应该强迫客户依赖于它们不用的方法，每一个接口应该是一种角色，不多不少，不干不该干的事，该干的事都要干。
* 为同一个角色提供宽、窄不同的接口，以应对不同类的需求。

## 合成/聚合复用原则（Composite/Aggregate Reuse Principle，CARP）
* 就是在一个新的对象里面使用一些已有的对象，使之成为新对象的一部分，新对象通过向这些对象的委派达到复用已有功能的目的。
* 简而言之，要尽量使用合成/聚合，而尽量不要使用继承。
* 要区分has a和is a的问题。

## 迪米特法则（Law of Demeter，LoD）
* 只与直接的朋友们通信，而不要和陌生人说话。
* 如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用。如果其中的一个类需要调用另外一个类的某一个方法，可以通过第三者转发这个调用。

